extends Node

var rng := RandomNumberGenerator.new()

const enemy_path_list := [
	"res://enemy_data/enemy_tres/Armadillo2.tres", "res://enemy_data/enemy_tres/Armadillo3.tres", "res://enemy_data/enemy_tres/Armadillo.tres", "res://enemy_data/enemy_tres/Armoredskeleton2.tres", "res://enemy_data/enemy_tres/Armoredskeleton3.tres", "res://enemy_data/enemy_tres/Armoredskeleton4.tres", "res://enemy_data/enemy_tres/Armoredskeleton.tres", "res://enemy_data/enemy_tres/Banshee2.tres", "res://enemy_data/enemy_tres/Banshee.tres", "res://enemy_data/enemy_tres/Bat2.tres", "res://enemy_data/enemy_tres/Bat3.tres", "res://enemy_data/enemy_tres/Bat4.tres", "res://enemy_data/enemy_tres/Bat.tres", "res://enemy_data/enemy_tres/BatMiniboss2.tres", "res://enemy_data/enemy_tres/BatMiniboss.tres", "res://enemy_data/enemy_tres/Beetle2.tres", "res://enemy_data/enemy_tres/Beetle.tres", "res://enemy_data/enemy_tres/Bishop2.tres", "res://enemy_data/enemy_tres/Bishop.tres", "res://enemy_data/enemy_tres/Blademaster2.tres", "res://enemy_data/enemy_tres/Blademaster.tres", "res://enemy_data/enemy_tres/BombLit.tres", "res://enemy_data/enemy_tres/BombLitSafe.tres", "res://enemy_data/enemy_tres/Clone.tres", "res://enemy_data/enemy_tres/Conductor.tres", "res://enemy_data/enemy_tres/ConductorSarcophagus.tres", "res://enemy_data/enemy_tres/Conjurer.tres", "res://enemy_data/enemy_tres/Coralriff.tres", "res://enemy_data/enemy_tres/CoralriffAngry.tres", "res://enemy_data/enemy_tres/Crate2.tres", "res://enemy_data/enemy_tres/DeadRinger.tres", "res://enemy_data/enemy_tres/DeadRingerPhase2.tres", "res://enemy_data/enemy_tres/Deathmetal.tres", "res://enemy_data/enemy_tres/DeathmetalPhase2.tres", "res://enemy_data/enemy_tres/DeathmetalPhase3.tres", "res://enemy_data/enemy_tres/DeathmetalPhase4.tres", "res://enemy_data/enemy_tres/Devil2.tres", "res://enemy_data/enemy_tres/Devil2Unshelled.tres", "res://enemy_data/enemy_tres/Devil.tres", "res://enemy_data/enemy_tres/DevilUnshelled.tres", "res://enemy_data/enemy_tres/Doppelganger.tres", "res://enemy_data/enemy_tres/Dragon2.tres", "res://enemy_data/enemy_tres/Dragon3.tres", "res://enemy_data/enemy_tres/Dragon4.tres", "res://enemy_data/enemy_tres/Dragon.tres", "res://enemy_data/enemy_tres/ElectricMage2.tres", "res://enemy_data/enemy_tres/ElectricMage3.tres", "res://enemy_data/enemy_tres/ElectricMage.tres", "res://enemy_data/enemy_tres/ElectricOrb2.tres", "res://enemy_data/enemy_tres/ElectricOrb3.tres", "res://enemy_data/enemy_tres/ElectricOrb.tres", "res://enemy_data/enemy_tres/Evileye2.tres", "res://enemy_data/enemy_tres/Evileye.tres", "res://enemy_data/enemy_tres/Fakewall2.tres", "res://enemy_data/enemy_tres/Fakewall.tres", "res://enemy_data/enemy_tres/Fireelemental.tres", "res://enemy_data/enemy_tres/Fortissimole.tres", "res://enemy_data/enemy_tres/FortissimolePhase2.tres", "res://enemy_data/enemy_tres/Frankensteinway.tres", "res://enemy_data/enemy_tres/Gargoyle2.tres", "res://enemy_data/enemy_tres/Gargoyle3.tres", "res://enemy_data/enemy_tres/Gargoyle4.tres", "res://enemy_data/enemy_tres/Gargoyle5.tres", "res://enemy_data/enemy_tres/Gargoyle6.tres", "res://enemy_data/enemy_tres/Gargoyle7.tres", "res://enemy_data/enemy_tres/Gargoyle.tres", "res://enemy_data/enemy_tres/Ghast.tres", "res://enemy_data/enemy_tres/Ghost.tres", "res://enemy_data/enemy_tres/Ghoul.tres", "res://enemy_data/enemy_tres/Goblin2.tres", "res://enemy_data/enemy_tres/Goblin.tres", "res://enemy_data/enemy_tres/GoblinBomber.tres", "res://enemy_data/enemy_tres/Golem2.tres", "res://enemy_data/enemy_tres/Golem3.tres", "res://enemy_data/enemy_tres/Golem3Gooless.tres", "res://enemy_data/enemy_tres/Golem.tres", "res://enemy_data/enemy_tres/Gorgon2.tres", "res://enemy_data/enemy_tres/Gorgon.tres", "res://enemy_data/enemy_tres/Harpy.tres", "res://enemy_data/enemy_tres/Hellhound.tres", "res://enemy_data/enemy_tres/Iceelemental.tres", "res://enemy_data/enemy_tres/King2.tres", "res://enemy_data/enemy_tres/King2Angry.tres", "res://enemy_data/enemy_tres/King.tres", "res://enemy_data/enemy_tres/KingAngry.tres", "res://enemy_data/enemy_tres/KingConga.tres", "res://enemy_data/enemy_tres/KingCongaAngry.tres", "res://enemy_data/enemy_tres/Knight2.tres", "res://enemy_data/enemy_tres/Knight.tres", "res://enemy_data/enemy_tres/Leprechaun.tres", "res://enemy_data/enemy_tres/LeprechaunAngry.tres", "res://enemy_data/enemy_tres/Lich2.tres", "res://enemy_data/enemy_tres/Lich3.tres", "res://enemy_data/enemy_tres/Lich.tres", "res://enemy_data/enemy_tres/LuteDragon.tres", "res://enemy_data/enemy_tres/LuteHead.tres", "res://enemy_data/enemy_tres/Metrognome2.tres", "res://enemy_data/enemy_tres/Metrognome.tres", "res://enemy_data/enemy_tres/Minotaur2.tres", "res://enemy_data/enemy_tres/Minotaur.tres", "res://enemy_data/enemy_tres/Mole.tres", "res://enemy_data/enemy_tres/Mommy.tres", "res://enemy_data/enemy_tres/Monkey2.tres", "res://enemy_data/enemy_tres/Monkey3.tres", "res://enemy_data/enemy_tres/Monkey4.tres", "res://enemy_data/enemy_tres/Monkey.tres", "res://enemy_data/enemy_tres/Motherslime.tres", "res://enemy_data/enemy_tres/Mummy.tres", "res://enemy_data/enemy_tres/MummyDancer.tres", "res://enemy_data/enemy_tres/Mushroom2.tres", "res://enemy_data/enemy_tres/Mushroom.tres", "res://enemy_data/enemy_tres/MushroomExploding.tres", "res://enemy_data/enemy_tres/MushroomExplodingActivated.tres", "res://enemy_data/enemy_tres/Necrodancer2.tres", "res://enemy_data/enemy_tres/Necrodancer2Phase2.tres", "res://enemy_data/enemy_tres/Necrodancer.tres", "res://enemy_data/enemy_tres/NecrodancerPhase2.tres", "res://enemy_data/enemy_tres/Nightmare2.tres", "res://enemy_data/enemy_tres/Nightmare.tres", "res://enemy_data/enemy_tres/Ogre.tres", "res://enemy_data/enemy_tres/Orc2.tres", "res://enemy_data/enemy_tres/Orc3.tres", "res://enemy_data/enemy_tres/Orc.tres", "res://enemy_data/enemy_tres/Pawn2.tres", "res://enemy_data/enemy_tres/Pawn.tres", "res://enemy_data/enemy_tres/Pawnbroker2.tres", "res://enemy_data/enemy_tres/Pawnbroker.tres", "res://enemy_data/enemy_tres/Pixie.tres", "res://enemy_data/enemy_tres/Queen2.tres", "res://enemy_data/enemy_tres/Queen2Promoted.tres", "res://enemy_data/enemy_tres/Queen.tres", "res://enemy_data/enemy_tres/QueenPromoted.tres", "res://enemy_data/enemy_tres/Rook2.tres", "res://enemy_data/enemy_tres/Rook.tres", "res://enemy_data/enemy_tres/Sarcophagus2.tres", "res://enemy_data/enemy_tres/Sarcophagus3.tres", "res://enemy_data/enemy_tres/Sarcophagus.tres", "res://enemy_data/enemy_tres/Shopkeeper2.tres", "res://enemy_data/enemy_tres/Shopkeeper3.tres", "res://enemy_data/enemy_tres/Shopkeeper4.tres", "res://enemy_data/enemy_tres/Shopkeeper5.tres", "res://enemy_data/enemy_tres/Shopkeeper.tres", "res://enemy_data/enemy_tres/ShopkeeperGhost.tres", "res://enemy_data/enemy_tres/Shovemonster2.tres", "res://enemy_data/enemy_tres/Shovemonster.tres", "res://enemy_data/enemy_tres/Shriner.tres", "res://enemy_data/enemy_tres/Skeleton2.tres", "res://enemy_data/enemy_tres/Skeleton2Dancer.tres", "res://enemy_data/enemy_tres/Skeleton2Headless.tres", "res://enemy_data/enemy_tres/Skeleton3.tres", "res://enemy_data/enemy_tres/Skeleton3Dancer.tres", "res://enemy_data/enemy_tres/Skeleton3Headless.tres", "res://enemy_data/enemy_tres/Skeleton4.tres", "res://enemy_data/enemy_tres/Skeleton4Dancer.tres", "res://enemy_data/enemy_tres/Skeleton.tres", "res://enemy_data/enemy_tres/SkeletonDancer.tres", "res://enemy_data/enemy_tres/Skeletonknight2.tres", "res://enemy_data/enemy_tres/Skeletonknight3.tres", "res://enemy_data/enemy_tres/Skeletonknight4.tres", "res://enemy_data/enemy_tres/Skeletonknight.tres", "res://enemy_data/enemy_tres/Skeletonmage2.tres", "res://enemy_data/enemy_tres/Skeletonmage3.tres", "res://enemy_data/enemy_tres/Skeletonmage.tres", "res://enemy_data/enemy_tres/Skeletonspearman.tres", "res://enemy_data/enemy_tres/Skeletontank.tres", "res://enemy_data/enemy_tres/Skull2.tres", "res://enemy_data/enemy_tres/Skull3.tres", "res://enemy_data/enemy_tres/Skull4.tres", "res://enemy_data/enemy_tres/Skull.tres", "res://enemy_data/enemy_tres/SleepingGoblin.tres", "res://enemy_data/enemy_tres/Slime2.tres", "res://enemy_data/enemy_tres/Slime3.tres", "res://enemy_data/enemy_tres/Slime4.tres", "res://enemy_data/enemy_tres/Slime5.tres", "res://enemy_data/enemy_tres/Slime6.tres", "res://enemy_data/enemy_tres/Slime7.tres", "res://enemy_data/enemy_tres/Slime8.tres", "res://enemy_data/enemy_tres/Slime.tres", "res://enemy_data/enemy_tres/Spider.tres", "res://enemy_data/enemy_tres/SpiderFallen.tres", "res://enemy_data/enemy_tres/Swarmsarcophagus.tres", "res://enemy_data/enemy_tres/Sync_CoopArmadillo.tres", "res://enemy_data/enemy_tres/Sync_CoopBlademaster.tres", "res://enemy_data/enemy_tres/Sync_CoopGhost.tres", "res://enemy_data/enemy_tres/Sync_CoopGolem.tres", "res://enemy_data/enemy_tres/Sync_CoopMonkey.tres", "res://enemy_data/enemy_tres/Sync_CoopOrc.tres", "res://enemy_data/enemy_tres/Sync_CoopSpirit.tres", "res://enemy_data/enemy_tres/Sync_ExplosiveBarrel.tres", "res://enemy_data/enemy_tres/Sync_Mannequin.tres", "res://enemy_data/enemy_tres/Sync_MannequinBat.tres", "res://enemy_data/enemy_tres/Sync_ShockMonkey.tres", "res://enemy_data/enemy_tres/Tarmonster.tres", "res://enemy_data/enemy_tres/TarmonsterExtracted.tres", "res://enemy_data/enemy_tres/Tentacle2.tres", "res://enemy_data/enemy_tres/Tentacle2Angry.tres", "res://enemy_data/enemy_tres/Tentacle3.tres", "res://enemy_data/enemy_tres/Tentacle3Angry.tres", "res://enemy_data/enemy_tres/Tentacle4.tres", "res://enemy_data/enemy_tres/Tentacle4Angry.tres", "res://enemy_data/enemy_tres/Tentacle5.tres", "res://enemy_data/enemy_tres/Tentacle5Angry.tres", "res://enemy_data/enemy_tres/Tentacle6.tres", "res://enemy_data/enemy_tres/Tentacle6Angry.tres", "res://enemy_data/enemy_tres/Tentacle7.tres", "res://enemy_data/enemy_tres/Tentacle7Angry.tres", "res://enemy_data/enemy_tres/Tentacle8.tres", "res://enemy_data/enemy_tres/Tentacle8Angry.tres", "res://enemy_data/enemy_tres/Tentacle.tres", "res://enemy_data/enemy_tres/TentacleAngry.tres", "res://enemy_data/enemy_tres/Thief.tres", "res://enemy_data/enemy_tres/Tinyslime.tres", "res://enemy_data/enemy_tres/Toad.tres", "res://enemy_data/enemy_tres/Toughsarcophagus.tres", "res://enemy_data/enemy_tres/Trainingsarcophagus.tres", "res://enemy_data/enemy_tres/Transmogrifier.tres", "res://enemy_data/enemy_tres/Trapcauldron2.tres", "res://enemy_data/enemy_tres/Trapcauldron.tres", "res://enemy_data/enemy_tres/Trapchest2.tres", "res://enemy_data/enemy_tres/Trapchest3.tres", "res://enemy_data/enemy_tres/Trapchest4.tres", "res://enemy_data/enemy_tres/Trapchest5.tres", "res://enemy_data/enemy_tres/Trapchest6.tres", "res://enemy_data/enemy_tres/Trapchest.tres", "res://enemy_data/enemy_tres/Troll.tres", "res://enemy_data/enemy_tres/Warlock2.tres", "res://enemy_data/enemy_tres/Warlock.tres", "res://enemy_data/enemy_tres/WaterBall2.tres", "res://enemy_data/enemy_tres/WaterBall.tres", "res://enemy_data/enemy_tres/Wight.tres", "res://enemy_data/enemy_tres/Wraith2.tres", "res://enemy_data/enemy_tres/Wraith.tres", "res://enemy_data/enemy_tres/Yeti.tres", "res://enemy_data/enemy_tres/Zombie.tres", "res://enemy_data/enemy_tres/ZombieElectric.tres", "res://enemy_data/enemy_tres/ZombieSnake.tres", "res://enemy_data/enemy_tres/ZombieSnakeRed.tres", "res://enemy_data/enemy_tres/ZombieSnakeYellow.tres"
]

# key: priority, value: enemy data
var enemy_list : Dictionary = {}
var raw_enemy_list : Array[Enemy] = []

var excluded_enemy_list : Dictionary = {}

func _ready() -> void:
	for enemy_path in enemy_path_list:
		var enemy : Enemy = load(enemy_path) as Enemy
		var target_dict : Dictionary
		if enemy.exclude_from_game:
			target_dict = excluded_enemy_list
		else:
			target_dict = enemy_list
			raw_enemy_list.append(enemy)
		
		if not target_dict.has(enemy.priority):
			target_dict[enemy.priority] = [enemy]
		else:
			target_dict[enemy.priority].append(enemy)

func get_enemy_by_friendlyName(friendlyName : String) -> Enemy:
	for enemy in raw_enemy_list:
		if friendlyName.to_lower() == enemy.friendlyName.to_lower():
			return enemy
	return null

func get_random_enemy(with_seed : bool = false, seed : int = 0) -> Enemy:
	if with_seed:
		rng.seed = seed
	else:
		rng.randomize()
	
	var priority : String = enemy_list.keys()[rng.randi_range(0, enemy_list.keys().size() - 1)]
	var candidate_list = enemy_list[priority] as Array[Enemy]
	return candidate_list[rng.randi_range(0, candidate_list.size() - 1)]
